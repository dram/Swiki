"Append to"request canAppend	ifTrue: [(shelf formatPrivAddress: 'includesBadContent' request: request response: response)		ifTrue: [book formatPageTemplate: 'appendFailed' request: request response: response shelf: shelf page: page]		ifFalse: ["Append to page"			[page				forbidWriting;				time: (Time now);				date: (Date today);				appendFormatRequest: request response: response shelf: shelf book: book;				user: 'unknown'] ifError: [:a :b | "Do nothing"].			[page				user: (shelf formatPrivAddress: 'getIPName' request: request response: response);				backup;				write;				permitWriting;				sendAlerts: request response: response shelf: shelf book: book] fork.			(request settingsAt: 'appendSuccess' ifAbsent: [false])				ifTrue: [response at: 'headerStatus' put: #tempMoved.					response at: 'location' put: (request referenceShelf: shelf book: book page: page).					book formatPageTemplate: 'appendSuccess' request: request response: response shelf: shelf page: page]				ifFalse: [book formatPageTemplate: 'appendFailed' request: request response: response shelf: shelf page: page]]]	ifFalse: [book formatPageAddress: 'default' request: request response: response shelf: shelf page: page]