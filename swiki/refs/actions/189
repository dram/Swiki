| month prefix postfix dayName pageForDay dayExists |month _ request settingsAt: 'month'.prefix _ ((request settingsAt: 'options') at: 'prefix' ifAbsent: ['']) asString.postfix _ ((request settingsAt: 'options') at: 'postfix' ifAbsent: ['']) asString.dayExists _ (book modulesAt: 'colorScheme') formatTemplate: 'dayExists' request: request response: response shelf: shelf book: book.String streamContents: [:stream |	month eachWeekDo: [:week |		stream nextPutAll: '<tr>'.		week do: [:day |			(day month = month)				ifTrue: [					dayName _ prefix, day printString, postfix.					pageForDay _ book pageNamed: dayName.					pageForDay						ifNil: [stream							nextPutAll: '<td align=center><a href="';							nextPutAll: (request referenceShelf: shelf book: book page: page address: 'newPage');							nextPutAll: '?name=';							nextPutAll: dayName encodeForHTTP;							nextPutAll: '">';							nextPutAll: day dayOfMonth asString;							nextPutAll: '</a></td>']						ifNotNil: [stream							nextPutAll: '<td align=center';							nextPutAll: dayExists;							nextPutAll: '><a href="';							nextPutAll: (request referenceShelf: shelf book: book page: pageForDay);							nextPutAll: '">';							nextPutAll: day dayOfMonth asString;							nextPutAll: '</a></td>']]				ifFalse: [stream					nextPutAll: '<td>&nbsp;</td>']].		stream			nextPutAll: '</tr>';			nextPutAll: String crlf]]