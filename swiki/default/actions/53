| values addresses test |values _ shelf formatPrivAddress: 'settings' request: request response: response.addresses _ OrderedCollection new.shelf forbidWriting.values do: [:value | (value class = Array) ifTrue: [	((value at: 3) isKindOf: String)		ifTrue: [test _ request fieldsKey: (value at: 1)]		ifFalse: [test _ request fieldsAsBooleanKey: (value at: 1)].	((value at: 3) = test) ifFalse: [		shelf settingsAt: (value at: 1) put: test.		(value at: 5) ifNotNil: [(addresses includes: (value at: 5))			ifFalse: [addresses add: (value at: 5)]]]]]."Do Addresses"addresses do: [:address | shelf formatPrivAddress: address request: request response: response]."Store Changes"shelf writeSettings.shelf permitWriting."Return Forward to Settings"response	at: 'headerStatus' put: #tempMoved;	at: 'location' put: (request referenceShelf: shelf address: 'admin/settings').shelf formatShelfTemplate: 'location' request: request response: response