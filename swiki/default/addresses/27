| ip content badIPsSetting badContentSetting |ip _ request fieldsKey: 'ip' ifAbsent: [''].content _ request fieldsKey: 'content' ifAbsent: [''].(ip = '') ifFalse: [	"Add IP to bad IP setting"	badIPsSetting _ shelf settingsAt: 'badIPs' ifAbsent: [''].	badIPsSetting _ (badIPsSetting = '')		ifTrue: [ip]		ifFalse: [badIPsSetting, (String cr), ip].	shelf settingsAt: 'badIPs' put: badIPsSetting.	"Roll back changes that the user made"	shelf rollBackUsers: badIPsSetting].(content = '') ifFalse: [	"Add content to bad content setting"	badContentSetting _ shelf settingsAt: 'badContent' ifAbsent: [''].	badContentSetting _ (badContentSetting = '')		ifTrue: [content]		ifFalse: [badContentSetting, (String cr), content].	shelf settingsAt: 'badContent' put: badContentSetting]."Save settings and reinitialize bad user protection"shelf writeSettings.shelf formatPrivAddress: 'initBadUserProtection' request: request response: response."Return to Remove User"response	at: 'headerStatus' put: #tempMoved;	at: 'location' put: (request referenceShelf: shelf address: 'admin/badUsers').shelf formatShelfTemplate: 'location' request: request response: response