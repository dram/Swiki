| uploads fileId dir |Processor activeProcess priority: SwikiModule searchPriority."Upload to site or to page"uploads _ book modulesAt: 'uploads'.(request fieldsAsBooleanKey: 'site') ifFalse: ["Upload to the Page"	uploads _ uploads directoryNamed: (page id asString)]."Move to file and move over to appropriate directory"fileId _ shelf modulesAt: 'tempUploadValue'.shelf modulesAt: 'tempUploadValue' put: (fileId + 1).fileId _ fileId asString.((dir _ shelf modulesAt: 'tempUploadDir') fileNamed: fileId)	open;	nextPutAll: (request fieldsKey: 'text' ifAbsent: ['']);	close.uploads moveFileNamed: (dir fullNameFor: fileId) toFileName: 'style.css'."Uploads success"response at: 'headerStatus' put: #tempMoved.response at: 'location' put: (request referenceShelf: shelf book: book page: page address: 'looks').book formatPageTemplate: 'attachSuccess' request: request response: response shelf: shelf page: page