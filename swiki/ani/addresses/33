| address page |request settingsAt: 'isOwner' put: true.address _ request address.request page	ifNil: [(#('default' 'changes' 'completeChanges' 'help' 'recent' 'search' 'uploads' 'account' 'remind' 'remindMe' 'signOut' 'siteMap' 'updateAccount' 'updateGlobalPreferences' 'updatePreferences' 'manageGroups' 'updateGroups' 'newGroup' 'updateOwners') includes: address)		ifTrue: [book formatBookAddress: address request: request response: response shelf: shelf]		ifFalse: [book pageAlmostNamed: address			forRequest: request			ifThere: [:i | book formatPageTemplate: 'view' request: request response: response shelf: shelf page: i]			ifNot: [response at: 'headerStatus' put: #notFound.				book formatBookTemplate: 'addressNotFound' request: request response: response shelf: shelf]]]	ifNotNil: [(#('default' 'append' 'appendHere' 'attach' 'attachImage' 'diff' 'edit' 'history' 'new' 'newPage' 'newPageSave' 'upload' 'version' 'vote' 'attachCSS' 'changeCS' 'attachLooks' 'historyWipe' 'looks' 'print' 'rss' 'save' 'upload' 'uploadDeleteBook' 'uploadDeletePage') includes: address)		ifTrue: [(page _ book pages at: (request page) ifAbsent: [nil])			ifNil: [response at: 'headerStatus' put: #notFound.				book formatBookTemplate: 'pageNotFound' request: request response: response shelf: shelf]			ifNotNil: [book formatPageAddress: address request: request response: response shelf: shelf page: page]]		ifFalse: [response at: 'headerStatus' put: #notFound.			book formatBookTemplate: 'addressNotFound' request: request response: response shelf: shelf]]