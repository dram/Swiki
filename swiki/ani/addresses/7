| security |security _ request security.(security password = (request fieldsKey: 'password'))	ifTrue: [(security name: (request fieldsKey: 'user'))		ifNil: [book formatBookTemplate: 'accountFailedUser' request: request response: response shelf: shelf]		ifNotNil: [			security address: (request fieldsKey: 'address').			(request fieldsKey: 'newPassword') isEmpty ifFalse: [				security password: (request fieldsKey: 'newPassword')].			security save.			request setUsername: security name password: security password.			response at: 'headerStatus' put: #tempMoved.			response at: 'location' put: (request referenceShelf: shelf book: book address: 'account').			book formatBookTemplate: 'accountSuccess' request: request response: response shelf: shelf]]	ifFalse: [book formatBookTemplate: 'accountFailedPassword' request: request response: response shelf: shelf]