| currentPage coll exit text |currentPage _ page.coll _ OrderedCollection new.exit _ false.[exit] whileFalse: [	text _ currentPage textKey: '2'.	(text = '') ifFalse: [		coll add: (Array with: currentPage with: text)].	(currentPage settingsAt: 'inheritMenu' ifAbsent: [true])		ifTrue: [(currentPage _ currentPage parentForRequest: request)			ifNil: [exit _ true]]		ifFalse: [exit _ true]].String streamContents: [:stream | coll reversed	do: [:arr |		request settingsRemove: 'appendId'.		request settingsAt: 'formId' put: '2'.		stream nextPutAll: ((arr at: 1) showFormat: (arr at: 2) request: request response: response shelf: shelf book: book)]	separatedBy: [stream		nextPutAll: (book formatBookAction: 'bar' request: request response: response shelf: shelf)]]