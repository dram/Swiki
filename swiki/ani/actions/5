| parent pageUploads file |(pageUploads _ (book modulesAt: 'uploads') directoryNamed: (page id asString) ifAbsent: [nil])	ifNil: [(parent _ page parentForRequest: request)		ifNil: [book formatBookAction: 'bannerContent' request: request response: response shelf: shelf]		ifNotNil: [book formatPageAction: 'bannerContent' request: request response: response shelf: shelf page: parent]]	ifNotNil: [(file _ pageUploads bannerImage)		ifNil: [(parent _ page parentForRequest: request)			ifNil: [book formatBookAction: 'bannerContent' request: request response: response shelf: shelf]			ifNotNil: [book formatPageAction: 'bannerContent' request: request response: response shelf: shelf page: parent]]		ifNotNil: [String streamContents: [:stream | stream			nextPutAll: ' background="';			nextPutAll: (book settingsAt: 'uploadServerPath');			nextPutAll: pageUploads httpPath;			nextPutAll: file httpName;			nextPutAll: '"><img src="';			nextPutAll: (book formatBookAction: 'toFiles' request: request response: response shelf: shelf);			nextPutAll: 'blank.gif" alt="" width=1 height=';			nextPutAll: file height asString]]]