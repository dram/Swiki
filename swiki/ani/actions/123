| month prefix postfix dayName pageForDay bgColor |month _ request settingsAt: 'month'.prefix _ ((request settingsAt: 'options') at: 'prefix' ifAbsent: ['']) asString.postfix _ ((request settingsAt: 'options') at: 'postfix' ifAbsent: ['']) asString.bgColor _ 'row1'.String streamContents: [:stream |	month eachWeekDo: [:week |		stream nextPutAll: '<tr>'.		week do: [:day |			(day month = month)				ifTrue: [					dayName _ prefix, day printString, postfix.					pageForDay _ book pageNamed: dayName.					pageForDay ifNotNil: [						((pageForDay accessLevelForRequest: request) < 2) ifTrue: [							pageForDay _ nil]].					pageForDay						ifNil: [stream							nextPutAll: '<td class="';							nextPutAll: bgColor;							nextPutAll: '" align=center>';							nextPutAll: day dayOfMonth asString;							nextPutAll: '</td>']						ifNotNil: [stream							nextPutAll: '<td class="dayExists" align=center><a href="';							nextPutAll: (request referenceShelf: shelf book: book page: pageForDay);							nextPutAll: '">';							nextPutAll: day dayOfMonth asString;							nextPutAll: '</a></td>']]				ifFalse: [stream					nextPutAll: '<td class="';					nextPutAll: bgColor;					nextPutAll: '">&nbsp;</td>']].		bgColor _ (bgColor = 'row1') ifTrue: ['row2'] ifFalse: ['row1'].		stream			nextPutAll: '</tr>';			nextPutAll: String crlf]]