| maxDepth page |"Determine maxDepth"maxDepth _ (request settingsAt: 'options' ifAbsent: [Dictionary new]) at: 'depth' ifAbsent: ['10'].maxDepth isAllDigits	ifTrue: [maxDepth _ maxDepth asNumber.		(maxDepth < 2) ifTrue: [maxDepth _ 1]]	ifFalse: [maxDepth _ 10]."Return site map"String streamContents: [:stream |	stream		nextPutAll: '<table class="sitemap" border=0 cellspacing=0 cellpadding=2>';		nextPutAll: String crlf.	(book siteMapCollectionRequest: request depth: maxDepth) do: [:arr |		page _ arr at: 1.		stream			nextPutAll: '<tr><td>'.		(arr at: 2) timesRepeat: [stream			nextPutAll: '&nbsp;&nbsp;:&nbsp;'].		stream			nextPutAll: (book formatPageAction: 'link' request: request response: response shelf: shelf page: page);			nextPutAll: '</td></tr>';			nextPutAll: String crlf].		stream			nextPutAll: '</table>']