| select oldSize notAllowed parent |select _ book pages.notAllowed _ OrderedCollection with: page id.oldSize _ select size + 1.[select size = oldSize] whileFalse: [	oldSize _ select size.	select _ select select: [:i | (notAllowed includes: i id) not].	select do: [:i | (notAllowed includes: (i settingsAt: 'parent' ifAbsent: [nil])) ifTrue: [		notAllowed add: i id]]].((page id = 1) or: [select size = 0])	ifTrue: [(page id = 1)		ifTrue: ['<small><em>This page is the first page in the site and cannot have a parent page.</em></small><br>']		ifFalse: ['<small><em>There are no pages available to be the parent of this page.</em></small>']]	ifFalse: ["List the parents so that the parent can change"		parent _ page settingsAt: 'parent' ifAbsent: [nil].		String streamContents: [:stream |			stream				nextPutAll: '<select name="parent">';				nextPutAll: String crlf;				nextPutAll: '<option value="0"';				nextPutAll: (parent					ifNil: [' selected>']					ifNotNil: ['>']);				nextPutAll: 'none';				nextPutAll: String crlf.			select do: [:i | stream				nextPutAll: '<option value="';				nextPutAll: i id asString;				nextPutAll: '"';				nextPutAll: ((parent = i id)					ifTrue: [' selected>']					ifFalse: ['>']);				nextPutAll: i id asString;				nextPutAll: '. ';				nextPutAll: (i showNameCroppedTo: 16);				nextPutAll: String crlf].			stream				nextPutAll: '</select><br>']]