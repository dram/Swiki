| sortedPages date |"Use only the ones that are linkable for the request"sortedPages _ request linkablePagesInBook: book.sortedPages _ (sortedPages asSortedCollection: [:x :y | (x date = y date) ifTrue: [x time > y time] ifFalse: [x date > y date]]) asOrderedCollection.date _ nil.String streamContents: [:stream |	sortedPages do: [:page |		(date notNil and: [page date = date]) ifFalse: [			date ifNotNil: ["End Previous"				stream					nextPutAll: '</ul>';					nextPutAll: String crlf].			date _ page date.			stream				nextPutAll: '<h3>';				nextPutAll: page printDate;				nextPutAll: '</h3>';				nextPutAll: String crlf;				nextPutAll: '<ul>';				nextPutAll: String crlf].		"Remove aliases to allow link action to work"		request			settingsRemove: 'alias';			settingsRemove: 'location'.		stream			nextPutAll: (book formatPageTemplate: 'recentListing' request: request response: response shelf: shelf page: page)].	stream		nextPutAll: '</ul>';		nextPutAll: String crlf]