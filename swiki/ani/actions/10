| parents test |"Form a Collection with all the parents"parents _ OrderedCollection new.test _ page parent.[test isNil] whileFalse: [	parents add: test.	test _ test parent].(request settingsAt: 'isOwner') ifFalse: [	"Filter out pages that are not viewable"	parents _ parents select: [:i |		(i accessLevelForRequest: request) > 1]]."Display Parents"parents isEmpty	ifTrue: ['']	ifFalse: [String streamContents: [:stream |		stream			nextPutAll: '<table border=0 cellspacing=0 cellpadding=2>';			nextPutAll: String crlf.		1 to: (parents size) do: [:i |			stream				nextPutAll: '<tr><td align=right valign=top>'.			(parents size - i + 1) timesRepeat: [stream nextPut: $:].			test _ parents at: (parents size - i + 1).			stream				nextPutAll: '</td><td><a href="';				nextPutAll: (request referenceShelf: shelf book: book page: test);				nextPutAll: '" title="';				nextPutAll: test showStrictName;				nextPutAll: ': last edited ';				nextPutAll: (book formatPageAction: 'timePast' request: request response: response shelf: shelf page: test);				nextPutAll: ' ago by ';				nextPutAll: (book formatPageAction: 'user-plaintext' request: request response: response shelf: shelf page: test);				nextPutAll: '">';				nextPutAll: test showName;				nextPutAll: (book formatPageAction: 'showLock' request: request response: response shelf: shelf page: test);				nextPutAll: '</a></td></tr>';				nextPutAll: String crlf].		stream			nextPutAll: '</table>';			nextPutAll: String crlf;			nextPutAll: (book formatBookAction: 'bar' request: request response: response shelf: shelf)]]